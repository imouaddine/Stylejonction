<fieldset id="background_field" class="background_field edit_portfolio_bg">
  <div class="order">1</div>
  <legend>Background image</legend>
  <p class="description">Select a background from the gallery or create your own background</p>
  <div>
    <%= render 'portfolios/fields/backgrounds/predefined/form', 
							:visible => @portfolio.has_predefined_background?, 
							:form => form,
							:selected => @portfolio.predefined_background %>
    <div id="custom_background_field" class="field box background_field <%= 'hidden' if @portfolio.has_predefined_background? %>">
      <div>
        <a class="toggle_btn" href="#">
          <small>CHOOSE FROM </small><br>GALLERY
        </a>
        <div class="user_selection">
          <p class="description">
            Select <em>one</em> of the following options for your background.
          </p>
          <ul class="horizontal_list">
            <li>
              <%= radio_button_tag 'bg',
                  'update_custom_background',
                  @portfolio.has_custom_background?,
                  :id => "custom_background_input",
                  :class => 'custom_background_toggle'
									   %>
              <label for="custom_background_input" >Upload your image</label>
            </li>
            <li>
              <%= radio_button_tag 'bg',
                  'update_pattern_background',
                  @portfolio.has_pattern_background?,
                  :id => "pattern_background_input",
                  :class => 'custom_background_toggle'
									    %>
              <label for="pattern_background_input">Choose a colour & pattern</label>
            </li>
          </ul>
        </div>
      </div>
      <div class="tabs">
        <%= render 'portfolios/fields/backgrounds/custom/form',
						:form => form,
            :background => @portfolio.custom_background,
            :visible => @portfolio.has_custom_background? || !@portfolio.has_pattern_background?,
            :show_links =>  @portfolio.has_custom_background? %>

 				<%= render 'portfolios/fields/backgrounds/pattern/form',
						:form => form,
            :background => @portfolio.pattern_background,
 						:visible => @portfolio.has_pattern_background? %>

        
      </div>
    </div>
  </div>
</fieldset>
	<%= form.hidden_field :background_id %>
	<%= form.hidden_field :background_type %>


<%= photo_uploadify "#upload_custom_bg", nil, custom_backgrounds_path(:format => 'js'), 'background[background]' %>
